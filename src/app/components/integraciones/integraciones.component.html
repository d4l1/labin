<div class="bg-[--color-custom]">
  <div class="container mx-auto py-12">
    <h2 class="text-3xl font-ubuntu-bold text-[--color-main] mb-6">Integraciones</h2>
    <p class="text-[--color-main]">Encuentra las integraciones que necesitas aquí.</p>

    <div class="flex flex-col md:flex-row items-center mt-4 space-y-4 md:space-y-0">
      <input
        type="text"
        class="border border-gray-300 px-4 py-2 rounded-md md:rounded-l-md focus:outline-none focus:ring focus:border-blue-300 flex-grow"
        placeholder="Asana + Google Drive ..."
        [(ngModel)]="buscarTexto"
        (input)="filtrarIntegraciones()"
      />
      <button
        class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md md:rounded-r-md md:rounded-l-none"
        (click)="filtrarIntegraciones()"
      >
        <svg
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <circle cx="12" cy="12" r="10" stroke="#c4c3fc" stroke-width="1.5" />
          <path
            d="M6 4.71053C6.78024 5.42105 8.38755 7.36316 8.57481 9.44737C8.74984 11.3955 10.0357 12.9786 12 13C12.7549 13.0082 13.5183 12.4629 13.5164 11.708C13.5158 11.4745 13.4773 11.2358 13.417 11.0163C13.3331 10.7108 13.3257 10.3595 13.5 10C14.1099 8.74254 15.3094 8.40477 16.2599 7.72186C16.6814 7.41898 17.0659 7.09947 17.2355 6.84211C17.7037 6.13158 18.1718 4.71053 17.9377 4"
            stroke="#c4c3fc"
            stroke-width="1.5"
          />
          <path
            d="M22 13C21.6706 13.931 21.4375 16.375 17.7182 16.4138C17.7182 16.4138 14.4246 16.4138 13.4365 18.2759C12.646 19.7655 13.1071 21.3793 13.4365 22"
            stroke="#c4c3fc"
            stroke-width="1.5"
          />
        </svg>
      </button>
    </div>

    <div class="mt-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
      <ng-container *ngIf="integracionesFiltradas.length > 0; else noResult">
        <div
          class="bg-white rounded-lg shadow-md p-6 integracion-card"
          *ngFor="let integracion of integracionesFiltradas"
        >
          <div class="flex justify-between items-center">
            <div>
              <h3 class="text-lg font-ubuntu text-[--color-custom]">
                {{ integracion.nombre }}
              </h3>
              <p class="text-gray-600">Uso: {{ integracion.porcentajeUso }}%</p>
            </div>
            <a
              href="{{ integracion.enlace }}"
              class="text-blue-500"
              target="_blank"
              >Ver más</a
            >
          </div>
        </div>
      </ng-container>
      <ng-template #noResult>
        <div class="bg-white rounded-lg shadow-md p-6 integracion-card">
          <h3 class="text-lg font-ubuntu text-[--color-custom]">
            No se encontraron resultados
          </h3>
          <p class="text-[--color-custom]">
            ¡Contáctanos para crear esta integración!
          </p>
          <form (ngSubmit)="crearIntegracion($event)" class="mt-4">
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
              <div>
                <label
                  for="nombre"
                  class="block text-sm font-medium text-gray-700"
                  >Nombre:</label
                >
                <input
                  type="text"
                  id="nombre"
                  name="nombre"
                  autocomplete="given-name"
                  required
                  class="mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"
                />
              </div>
              <div>
                <label
                  for="email"
                  class="block text-sm font-medium text-gray-700"
                  >Email:</label
                >
                <input
                  type="email"
                  id="email"
                  name="email"
                  autocomplete="email"
                  required
                  class="mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"
                />
              </div>
            </div>
            <button
              type="submit"
              class="mt-4 bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md"
            >
              Enviar
            </button>
          </form>
        </div>
      </ng-template>
    </div>
  </div>
</div>
